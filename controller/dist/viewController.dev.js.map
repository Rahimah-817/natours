{"version":3,"sources":["viewController.js"],"names":["Tour","require","catchAsync","getOverview","req","res","next","find","tours","status","render","title","getTour","findOne","slug","params","populate","path","fields","tour","name","module","exports"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,qBAAD,CAApB;;AACA,IAAMC,UAAU,GAAGD,OAAO,CAAC,qBAAD,CAA1B;;AAEA,IAAME,WAAW,GAAGD,UAAU,CAAC,iBAAOE,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAETN,IAAI,CAACO,IAAL,EAFS;;AAAA;AAEvBC,UAAAA,KAFuB;AAI7B;AACA;AACAH,UAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,MAAhB,CAAuB,UAAvB,EAAmC;AACjCC,YAAAA,KAAK,EAAE,WAD0B;AAEjCH,YAAAA,KAAK,EAALA;AAFiC,WAAnC;;AAN6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD,CAA9B;AAYA,IAAMI,OAAO,GAAGV,UAAU,CAAC,kBAAOE,GAAP,EAAYC,GAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CACNL,IAAI,CAACa,OAAL,CAAa;AAAEC,YAAAA,IAAI,EAAEV,GAAG,CAACW,MAAJ,CAAWD;AAAnB,WAAb,EAAwCE,QAAxC,CAAiD;AAClEC,YAAAA,IAAI,EAAE,QAD4D;AAElEC,YAAAA,MAAM,EAAE;AAF0D,WAAjD,CADM;;AAAA;AACnBC,UAAAA,IADmB;;AAAA,cAMpBA,IANoB;AAAA;AAAA;AAAA;;AAAA,4CAOhBd,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,MAAhB,CAAuB,KAAvB,EAA8B;AAAEC,YAAAA,KAAK,EAAE;AAAT,WAA9B,CAPgB;;AAAA;AAUzBN,UAAAA,GAAG,CAACI,MAAJ,CAAW,GAAX,EAAgBC,MAAhB,CAAuB,MAAvB,EAA+B;AAC7BC,YAAAA,KAAK,EAAEQ,IAAI,CAACC,IADiB;AAE7BD,YAAAA,IAAI,EAAJA;AAF6B,WAA/B;;AAVyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD,CAA1B;AAgBAE,MAAM,CAACC,OAAP,GAAiB;AACfnB,EAAAA,WAAW,EAAXA,WADe;AAEfS,EAAAA,OAAO,EAAPA;AAFe,CAAjB","sourcesContent":["const Tour = require(\"../model/tourSchema\");\r\nconst catchAsync = require(\"../utils/catchAsync\");\r\n\r\nconst getOverview = catchAsync(async (req, res, next) => {\r\n  // 1) get tour data from collection\r\n  const tours = await Tour.find();\r\n\r\n  // 2) Build template\r\n  // 3) Render that template using tour data from 1.\r\n  res.status(200).render(\"overview\", {\r\n    title: \"All Tours\",\r\n    tours,\r\n  });\r\n});\r\n\r\nconst getTour = catchAsync(async (req, res) => {\r\n  const tour = await Tour.findOne({ slug: req.params.slug }).populate({\r\n    path: \"review\",\r\n    fields: \"name review rating user\",\r\n  });\r\n\r\n  if (!tour) {\r\n    return res.status(404).render(\"404\", { title: \"Tour Not Found\" });\r\n  }\r\n\r\n  res.status(200).render(\"tour\", {\r\n    title: tour.name,\r\n    tour,\r\n  });\r\n});\r\n\r\nmodule.exports = {\r\n  getOverview,\r\n  getTour,\r\n};\r\n"],"file":"viewController.dev.js"}