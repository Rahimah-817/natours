{"version":3,"sources":["viewController.js"],"names":["Tour","require","catchAsync","getOverview","req","res","tours","regeneratorRuntime","async","_context","prev","next","awrap","find","sent","status","render","title","stop","getTour","tour","_context2","findOne","slug","params","populate","path","fields","abrupt","name","module"],"mappings":"aAAA,IAAMA,KAAOC,QAAQ,uBACfC,WAAaD,QAAQ,uBAErBE,YAAcD,WAAW,SAAOE,EAAKC,GAAZ,IAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAAF,EAAAE,KAAA,EAAAJ,mBAAAK,MAETZ,KAAKa,QAFI,KAAA,EAEvBP,EAFuBG,EAAAK,KAAAT,EAAAU,OAAA,KAAAC,OAAA,WAAA,CAAAC,MAAA,YAAAX,MAAAA,IAAA,KAAA,EAAA,IAAA,MAAA,OAAAG,EAAAS,YAAAC,QAAAjB,WAAA,SAAAE,EAAAC,GAAA,IAAAe,EAAA,OAAAb,mBAAAC,MAAA,SAAAa,GAAA,OAAA,OAAAA,EAAAX,KAAAW,EAAAV,MAAA,KAAA,EAAA,OAAAU,EAAAV,KAAA,EAAAJ,mBAAAK,MAAAZ,KAAAsB,QAAA,CAAAC,KAAAnB,EAAAoB,OAAAD,OAAAE,SAAA,CAI7BC,KAAA,SACAC,OAAA,6BAL6B,KAAA,EAAA,GAEvBrB,EAFuBe,EAAAP,KAAA,CAAAO,EAAAV,KAAA,EAAA,MAAA,OAAAU,EAAAO,OAAA,SAM7BvB,EAAAU,OAAA,KAAAC,OAAA,MAAA,CAAAC,MAAA,oBAN6B,KAAA,EAAAZ,EAAAU,OAAA,KAAAC,OAAA,OAAA,CAAAC,MAAAG,EAAAS,KAAAT,KAAAA,IAAA,KAAA,EAAA,IAAA,MAAA,OAAAC,EAAAH,YAY/BY,OAAMX,QAAUjB,CAAWC,YAAAA,YAAAgB,QAAAA","file":"viewController.min.js","sourcesContent":["const Tour = require(\"../model/tourSchema\");\r\nconst catchAsync = require(\"../utils/catchAsync\");\r\n\r\nconst getOverview = catchAsync(async (req, res, next) => {\r\n  // 1) get tour data from collection\r\n  const tours = await Tour.find();\r\n\r\n  // 2) Build template\r\n  // 3) Render that template using tour data from 1.\r\n  res.status(200).render(\"overview\", {\r\n    title: \"All Tours\",\r\n    tours,\r\n  });\r\n});\r\n\r\nconst getTour = catchAsync(async (req, res) => {\r\n  const tour = await Tour.findOne({ slug: req.params.slug }).populate({\r\n    path: \"review\",\r\n    fields: \"name review rating user\",\r\n  });\r\n\r\n  if (!tour) {\r\n    return res.status(404).render(\"404\", { title: \"Tour Not Found\" });\r\n  }\r\n\r\n  res.status(200).render(\"tour\", {\r\n    title: tour.name,\r\n    tour,\r\n  });\r\n});\r\n\r\nmodule.exports = {\r\n  getOverview,\r\n  getTour,\r\n};\r\n"]}