{"version":3,"sources":["import-dev-data.js"],"names":["fs","require","mongoose","Tour","User","Review","dotenv","config","path","connectDB","connect","process","env","LOCAL_DATABASE","conn","console","log","error","message","tours","JSON","parse","readFileSync","__dirname","users","reviews","importData","create","validateBeforeSave","exit","deleteData","deleteMany","timeout","argv"],"mappings":"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","sourcesContent":["const fs = require('fs');\r\nconst mongoose = require('mongoose');\r\nconst Tour = require('../../model/tourSchema');\r\nconst User = require('../../model/userSchema');\r\nconst Review = require('../../model/reviewSchema');\r\nconst dotenv = require('dotenv');\r\n\r\ndotenv.config({ path: './config.env' });\r\n\r\nconst connectDB = async () => {\r\n  try {\r\n    const conn = await mongoose.connect(process.env.LOCAL_DATABASE);\r\n\r\n    console.log(`MongoDB Connected successfully!`);\r\n  } catch (error) {\r\n    console.error(`Error: ${error.message}`);\r\n  }\r\n};\r\nconnectDB();\r\n\r\n// READ JOSN FILE\r\nconst tours = JSON.parse(\r\n  fs.readFileSync(`${__dirname}/tours.json`, 'utf-8'),\r\n);\r\nconst users = JSON.parse(\r\n  fs.readFileSync(`${__dirname}/users.json`, 'utf-8'),\r\n);\r\nconst reviews = JSON.parse(\r\n  fs.readFileSync(`${__dirname}/reviews.json`, \"utf-8\"),\r\n);\r\n\r\n// IMPORT DATA INTO DB\r\nconst importData = async () => {\r\n  try {\r\n    await Tour.create(tours);\r\n    await User.create(users, {validateBeforeSave: false});\r\n    await Review.create(reviews); \r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  process.exit();\r\n};\r\n\r\n// DELETE ALL DATA FROM DB\r\nconst deleteData = async () => {\r\n  try {\r\n    await Tour.deleteMany({}, { timeout: 30000 });\r\n    await User.deleteMany({}, { timeout: 30000 });\r\n    await Review.deleteMany({}, { timeout: 30000 });\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  process.exit();\r\n};\r\n\r\nif (process.argv[2] === '--import') {\r\n  importData();\r\n} else if (process.argv[2] === '--delete') {\r\n  deleteData();\r\n}\r\n"],"file":"import-dev-data.dev.js"}