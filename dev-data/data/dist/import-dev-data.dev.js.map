{"version":3,"sources":["import-dev-data.js"],"names":["fs","require","mongoose","dotenv","Tour","Review","User","config","path","DB","process","env","LOCAL_DATABASE","replace","PASSWORD","connect","then","console","log","tours","JSON","parse","readFileSync","__dirname","users","reviews","importData","create","validateBeforeSave","exit","deleteData","deleteMany","argv"],"mappings":";;AAAA,IAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AACA,IAAMC,QAAQ,GAAGD,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAME,MAAM,GAAGF,OAAO,CAAC,QAAD,CAAtB;;AACA,IAAMG,IAAI,GAAGH,OAAO,CAAC,0BAAD,CAApB;;AACA,IAAMI,MAAM,GAAGJ,OAAO,CAAC,4BAAD,CAAtB;;AACA,IAAMK,IAAI,GAAGL,OAAO,CAAC,0BAAD,CAApB;;AAEAE,MAAM,CAACI,MAAP,CAAc;AAAEC,EAAAA,IAAI,EAAE;AAAR,CAAd;AAEA,IAAMC,EAAE,GAAGC,OAAO,CAACC,GAAR,CAAYC,cAAZ,CAA2BC,OAA3B,CACT,YADS,EAETH,OAAO,CAACC,GAAR,CAAYG,QAFH,CAAX;AAKAZ,QAAQ,CAACa,OAAT,CAAiBN,EAAjB,EAAqBO,IAArB,CAA0B;AAAA,SAAMC,OAAO,CAACC,GAAR,CAAY,2BAAZ,CAAN;AAAA,CAA1B,E,CAEA;;AACA,IAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWrB,EAAE,CAACsB,YAAH,WAAmBC,SAAnB,kBAA2C,OAA3C,CAAX,CAAd;AACA,IAAMC,KAAK,GAAGJ,IAAI,CAACC,KAAL,CAAWrB,EAAE,CAACsB,YAAH,WAAmBC,SAAnB,kBAA2C,OAA3C,CAAX,CAAd;AACA,IAAME,OAAO,GAAGL,IAAI,CAACC,KAAL,CACdrB,EAAE,CAACsB,YAAH,WAAmBC,SAAnB,oBAA6C,OAA7C,CADc,CAAhB,C,CAIA;;AACA,IAAMG,UAAU,GAAG,SAAbA,UAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAETtB,IAAI,CAACuB,MAAL,CAAYR,KAAZ,CAFS;;AAAA;AAAA;AAAA,0CAGTb,IAAI,CAACqB,MAAL,CAAYH,KAAZ,EAAmB;AAAEI,YAAAA,kBAAkB,EAAE;AAAtB,WAAnB,CAHS;;AAAA;AAAA;AAAA,0CAITvB,MAAM,CAACsB,MAAP,CAAcF,OAAd,CAJS;;AAAA;AAKfR,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AALe;AAAA;;AAAA;AAAA;AAAA;AAOfD,UAAAA,OAAO,CAACC,GAAR;;AAPe;AASjBR,UAAAA,OAAO,CAACmB,IAAR;;AATiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAnB,C,CAYA;;;AACA,IAAMC,UAAU,GAAG,SAAbA,UAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAET1B,IAAI,CAAC2B,UAAL,EAFS;;AAAA;AAAA;AAAA,0CAGTzB,IAAI,CAACyB,UAAL,EAHS;;AAAA;AAAA;AAAA,0CAIT1B,MAAM,CAAC0B,UAAP,EAJS;;AAAA;AAKfd,UAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ;AALe;AAAA;;AAAA;AAAA;AAAA;AAOfD,UAAAA,OAAO,CAACC,GAAR;;AAPe;AASjBR,UAAAA,OAAO,CAACmB,IAAR;;AATiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAnB;;AAYA,IAAInB,OAAO,CAACsB,IAAR,CAAa,CAAb,MAAoB,UAAxB,EAAoC;AAClCN,EAAAA,UAAU;AACX,CAFD,MAEO,IAAIhB,OAAO,CAACsB,IAAR,CAAa,CAAb,MAAoB,UAAxB,EAAoC;AACzCF,EAAAA,UAAU;AACX","sourcesContent":["const fs = require(\"fs\");\r\nconst mongoose = require(\"mongoose\");\r\nconst dotenv = require(\"dotenv\");\r\nconst Tour = require(\"./../../model/tourSchema\");\r\nconst Review = require(\"./../../model/reviewSchema\");\r\nconst User = require(\"./../../model/userSchema\");\r\n\r\ndotenv.config({ path: \"./config.env\" });\r\n\r\nconst DB = process.env.LOCAL_DATABASE.replace(\r\n  \"<PASSWORD>\",\r\n  process.env.PASSWORD,\r\n);\r\n\r\nmongoose.connect(DB).then(() => console.log(\"DB connection successful!\"));\r\n\r\n// READ JSON FILE\r\nconst tours = JSON.parse(fs.readFileSync(`${__dirname}/tours.json`, \"utf-8\"));\r\nconst users = JSON.parse(fs.readFileSync(`${__dirname}/users.json`, \"utf-8\"));\r\nconst reviews = JSON.parse(\r\n  fs.readFileSync(`${__dirname}/reviews.json`, \"utf-8\"),\r\n);\r\n\r\n// IMPORT DATA INTO DB\r\nconst importData = async () => {\r\n  try {\r\n    await Tour.create(tours);\r\n    await User.create(users, { validateBeforeSave: false });\r\n    await Review.create(reviews);\r\n    console.log(\"Data successfully loaded!\");\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  process.exit();\r\n};\r\n\r\n// DELETE ALL DATA FROM DB\r\nconst deleteData = async () => {\r\n  try {\r\n    await Tour.deleteMany();\r\n    await User.deleteMany();\r\n    await Review.deleteMany();\r\n    console.log(\"Data successfully deleted!\");\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  process.exit();\r\n};\r\n\r\nif (process.argv[2] === \"--import\") {\r\n  importData();\r\n} else if (process.argv[2] === \"--delete\") {\r\n  deleteData();\r\n}\r\n"],"file":"import-dev-data.dev.js"}